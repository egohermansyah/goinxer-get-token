<!DOCTYPE html>
<html>

<head>
    <title>GoInxer - Get google cloud token</title>
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
    <meta content="utf-8" http-equiv="encoding">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://apis.google.com/js/api.js"></script>
</head>

<body>
    <nav class="navbar navbar-expand-md navbar-dark bg-dark mb-4">
        <div class="container-fluid">
            <a class="navbar-brand" href="">GoInxer</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse"
                aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
        </div>
    </nav>

    <main class="container">
        <div class="bg-light p-5 rounded">
            <h1>GoInxer - Get token google cloud</h1>
            <div style="padding: 20px 0;">
                <input type="text" class="form-control" id="access-token" disabled>
            </div>
            <div style="padding: 20px 0 30px 0;">
                <a class="btn btn-lg btn-primary" href="#" role="button" id="get-token">Get google cloud token</a>
            </div>
        </div>
    </main>
    <script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
        integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
    <script>
        function google_oauth() {
            var api = 'https://accounts.google.com/o/oauth2/v2/auth',
                client_id = '64031222904-6cmmu6ndouu99oh10u5kgp4ckvn90kcc.apps.googleusercontent.com',
                scope = encodeURIComponent('https://www.googleapis.com/auth/cloud-platform+https://www.googleapis.com/auth/webmasters'),
                redirect = encodeURIComponent('https://egohermansyah.github.io/goinxer-get-token/');
            window.location = `https://accounts.google.com/o/oauth2/v2/auth?include_granted_scopes=true&response_type=token&state=state_parameter_passthrough_value&redirect_uri=${redirect}&client_id=${client_id}&scope=${scope}`;
        }
        function get_callback_params() {
            params = {};
            window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function (m, key, value) {
                params[key] = value;
            });
            return params;
        }
        $(document).ready(function () {
            var access_token = get_callback_params()['access_token'];
            if (access_token) {
                $("input#access-token").val(access_token);
            }
            $(document).on('click', '#get-token', function () {
                google_oauth();
            });
        });
    </script>
</body>